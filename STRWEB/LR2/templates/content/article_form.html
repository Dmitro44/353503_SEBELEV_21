{% extends 'base.html' %}

{% block title %}{{ title }} - Автопрокат{% endblock %}

{% block content %}
    <div>
        <div>
            <div>
                <div>
                    <h2>{{ title }}</h2>
                </div>
                <div>
                    <form method="post" enctype="multipart/form-data" novalidate>
                        {% csrf_token %}

                        {% if form.non_field_errors %}
                            <div>
                                {% for error in form.non_field_errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div>
                            <label for="{{ form.title.id_for_label }}">Заголовок</label>
                            {{ form.title }}
                            {% if form.title.errors %}
                                <div>
                                    {% for error in form.title.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <div>
                            <label for="{{ form.summary.id_for_label }}">Краткое описание</label>
                            {{ form.summary }}
                            <div>Короткое описание, которое будет отображаться в списке новостей</div>
                            {% if form.summary.errors %}
                                <div>
                                    {% for error in form.summary.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <div>
                            <label for="{{ form.content.id_for_label }}">Содержание</label>
                            {{ form.content }}
                            {% if form.content.errors %}
                                <div>
                                    {% for error in form.content.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <div>
                            <label for="{{ form.image.id_for_label }}">Изображение</label>
                            {% if object and object.image %}
                                <div>
                                    <img src="{{ object.image.url }}" alt="Текущее изображение" style="max-height: 200px;">
                                    <p>Текущее изображение. Загрузите новое, чтобы заменить.</p>
                                </div>
                            {% endif %}
                            {{ form.image }}
                            <div>Рекомендуемый размер: 1200x600px</div>
                            {% if form.image.errors %}
                                <div>
                                    {% for error in form.image.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <div>
                            {{ form.published }}
                            <label for="{{ form.published.id_for_label }}">
                                Опубликовать сразу
                            </label>
                            <div>Если не отмечено, новость будет сохранена как черновик</div>
                        </div>

                        <div style="display: flex; justify-content: space-between;">
                            <a href="{% if object %}{% url 'news_detail' object.pk %}{% else %}{% url 'news_list' %}{% endif %}">Назад</a>
                            <button type="submit">{% if object %}Сохранить{% else %}Создать{% endif %}</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}